----item----
version: 1
id: {FD19FA62-0605-4AA8-A3A6-F18193F7B2BB}
database: master
path: /sitecore/system/Modules/PowerShell/Script Library/Development/PowerShell Extensions Maintenance/Sitecore 71 Rules Engine Patch
parent: {01BB164C-5E8E-4C9B-941F-E5340BDD520C}
name: Sitecore 71 Rules Engine Patch
master: {00000000-0000-0000-0000-000000000000}
template: {DD22F1B3-BD87-4DB2-9E7D-F7A496888D43}
templatekey: PowerShell Script

----field----
field: {B1A94FF0-6897-47C0-9C51-AA6ACB80B1F0}
name: Script
key: script
content-length: 2980

$package = new-package "SPE Sitecore 7.1 Rules Engine Patch";
$package.Sources.Clear();

$package.Metadata.Author = "Adam Najmanowicz - Cognifide, Michael West, Michael Reynolds";
$package.Metadata.Publisher = "Cognifide Limited";
$package.Metadata.Version = "2.x";
$package.Metadata.Readme = 'This package provides compatibility for 
Sitecore PowerShell Extensions 2.x with the changes 
introducted to rules engine operation in Sitecore 7.1 and later.

IMPORTANT!
==========
Do not install with PowerShell Extensions 3.x or later!
Do not install on Sitecore 7.0 or older!

This module Should ONLY be installed if all 
of the following conditions are met: 
- The Sitecore  PowerShell Extensions 2.x have been installed
- Sitecore version is 7.1 or higher.

This module should be re-installed after every installation
of Sitecore PowerShell Extensions 2.x. 

Credits & such:

Please report any problems in our issue tracker:
http://bit.ly/ScPsIss

Thank you for using Sitecore PowerShell Extensions.

Copyright (c) 2010-2014 Adam Najmanowicz - Cognifide
Copyright (c) 2014 Michael West

http://www.cognifide.com/
http://blog.najmanowicz.com/
http://michaellwest.blogspot.com/
http://sitecorejunkie.com/category/powershell/'

# Rules field correction
$source = Get-ChildItem 'master:/templates/Modules/PowerShell Console/PowerShell Script/Interactive' -recurse | New-ExplicitItemSource -Name "Script rules fields definition" -InstallMode Merge -MergeMode Clear
$package.Sources.Add($source);
$source = Get-ChildItem 'master:/templates/Modules/PowerShell Console/PowerShell Script Library/Interactive' -recurse | New-ExplicitItemSource -Name "Script rules fields definition" -InstallMode Merge -MergeMode Clear
$package.Sources.Add($source);
$source = Get-ChildItem 'core:/templates/Modules/PowerShell Console/PowerShell Script/Interactive' -recurse | New-ExplicitItemSource -Name "Core script rules fields definition" -InstallMode Merge -MergeMode Clear
$package.Sources.Add($source);
$source = Get-ChildItem 'core:/templates/Modules/PowerShell Console/PowerShell Script Library/Interactive' -recurse | New-ExplicitItemSource -Name "Core script rules fields definition" -InstallMode Merge -MergeMode Clear
$package.Sources.Add($source);

# Tag Definition
$source = Get-Item "master:/system/Settings/Rules/Definitions/Tags/PowerShell" | New-ItemSource -Name "Tag" -InstallMode Merge -MergeMode Clear
$package.Sources.Add($source);
# Rules
$source = Get-Item "master:/system/Settings/Rules/Definitions/Elements/PowerShell" | New-ItemSource -Name "Tag" -InstallMode Merge -MergeMode Clear
$package.Sources.Add($source);

# Source Definition
$source = Get-Item "master:/system/Settings/Rules/PowerShell" | New-ItemSource -Name "Tag" -InstallMode Merge -MergeMode Clear
$package.Sources.Add($source);

Export-Package -Project $package -Path "$($package.Name)-$($package.Metadata.Version).zip" -Zip
Download-File "$SitecorePackageFolder\$($package.Name)-$($package.Metadata.Version).zip"

----version----
language: en
version: 1
revision: d4c4e6f9-e084-4ed0-9bc3-b7490328819f

----field----
field: {25BED78C-4957-4165-998A-CA1B52F67497}
name: __Created
key: __created
content-length: 15

20141103T004614
----field----
field: {8CDC337E-A112-42FB-BBB4-4143751E123F}
name: __Revision
key: __revision
content-length: 36

d4c4e6f9-e084-4ed0-9bc3-b7490328819f
----field----
field: {D9CF14B1-FA16-4BA6-9288-E8A174D4D522}
name: __Updated
key: __updated
content-length: 34

20141103T004614:635505723744177422
----field----
field: {BADD9CF9-53E0-4D0C-BCC0-2D784C282F6A}
name: __Updated by
key: __updated by
content-length: 14

sitecore\admin
